{"ast":null,"code":"var _excluded = [\"background\", \"border\", \"columns\", \"data\", \"fill\", \"groupBy\", \"onClickRow\", \"onMore\", \"onSearch\", \"onSelect\", \"onSort\", \"onUpdate\", \"replace\", \"pad\", \"paginate\", \"pin\", \"placeholder\", \"primaryKey\", \"resizeable\", \"rowProps\", \"select\", \"show\", \"size\", \"sort\", \"sortable\", \"rowDetails\", \"step\"];\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState, Fragment } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { Box } from '../Box';\nimport { Text } from '../Text';\nimport { Header } from './Header';\nimport { Footer } from './Footer';\nimport { Body } from './Body';\nimport { GroupedBody } from './GroupedBody';\nimport { Pagination } from '../Pagination';\nimport { buildFooterValues, buildGroups, buildGroupState, filterAndSortData, initializeFilters, normalizeCellProps, normalizePrimaryProperty } from './buildState';\nimport { normalizeShow, usePagination } from '../../utils';\nimport { StyledContainer, StyledDataTable, StyledPlaceholder } from './StyledDataTable';\nimport { DataTablePropTypes } from './propTypes';\n\nfunction useGroupState(groups, groupBy) {\n  var _useState = useState(function () {\n    return buildGroupState(groups, groupBy);\n  }),\n      groupState = _useState[0],\n      setGroupState = _useState[1];\n\n  var _useState2 = useState({\n    groups: groups,\n    groupBy: groupBy\n  }),\n      prevDeps = _useState2[0],\n      setPrevDeps = _useState2[1];\n\n  var prevGroups = prevDeps.groups,\n      prevGroupBy = prevDeps.groupBy;\n\n  if (groups !== prevGroups || groupBy !== prevGroupBy) {\n    setPrevDeps({\n      groups: groups,\n      groupBy: groupBy\n    });\n    var nextGroupState = buildGroupState(groups, groupBy);\n    setGroupState(nextGroupState);\n    return [nextGroupState, setGroupState];\n  }\n\n  return [groupState, setGroupState];\n}\n\nvar DataTable = function DataTable(_ref) {\n  var background = _ref.background,\n      border = _ref.border,\n      _ref$columns = _ref.columns,\n      columns = _ref$columns === void 0 ? [] : _ref$columns,\n      _ref$data = _ref.data,\n      data = _ref$data === void 0 ? [] : _ref$data,\n      fill = _ref.fill,\n      groupBy = _ref.groupBy,\n      onClickRow = _ref.onClickRow,\n      onMore = _ref.onMore,\n      onSearch = _ref.onSearch,\n      onSelect = _ref.onSelect,\n      onSortProp = _ref.onSort,\n      onUpdate = _ref.onUpdate,\n      replace = _ref.replace,\n      pad = _ref.pad,\n      paginate = _ref.paginate,\n      pin = _ref.pin,\n      placeholder = _ref.placeholder,\n      primaryKey = _ref.primaryKey,\n      resizeable = _ref.resizeable,\n      rowProps = _ref.rowProps,\n      select = _ref.select,\n      showProp = _ref.show,\n      size = _ref.size,\n      sortProp = _ref.sort,\n      sortable = _ref.sortable,\n      rowDetails = _ref.rowDetails,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 50 : _ref$step,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme; // property name of the primary property\n\n  var primaryProperty = useMemo(function () {\n    return normalizePrimaryProperty(columns, primaryKey);\n  }, [columns, primaryKey]); // whether or not we should show a footer\n\n  var showFooter = useMemo(function () {\n    return columns.filter(function (c) {\n      return c.footer;\n    }).length > 0;\n  }, [columns]); // what column we are actively capturing filter input on\n\n  var _useState3 = useState(),\n      filtering = _useState3[0],\n      setFiltering = _useState3[1]; // the currently active filters\n\n\n  var _useState4 = useState(initializeFilters(columns)),\n      filters = _useState4[0],\n      setFilters = _useState4[1]; // which column we are sorting on, with direction\n\n\n  var _useState5 = useState(sortProp || {}),\n      sort = _useState5[0],\n      setSort = _useState5[1]; // the data filtered and sorted, if needed\n  // Note: onUpdate mode expects the data to be passed\n  //   in completely filtered and sorted already.\n\n\n  var adjustedData = useMemo(function () {\n    return onUpdate ? data : filterAndSortData(data, filters, onSearch, sort);\n  }, [data, filters, onSearch, onUpdate, sort]); // the values to put in the footer cells\n\n  var footerValues = useMemo(function () {\n    return buildFooterValues(columns, adjustedData);\n  }, [adjustedData, columns]); // cell styling properties: background, border, pad\n\n  var cellProps = useMemo(function () {\n    return normalizeCellProps({\n      background: background,\n      border: border,\n      pad: pad,\n      pin: pin\n    }, theme);\n  }, [background, border, pad, pin, theme]); // if groupBy, an array with one item per unique groupBy key value\n\n  var groups = useMemo(function () {\n    return buildGroups(columns, adjustedData, groupBy, primaryProperty);\n  }, [adjustedData, columns, groupBy, primaryProperty]); // an object indicating which group values are expanded\n\n  var _useGroupState = useGroupState(groups, groupBy),\n      groupState = _useGroupState[0],\n      setGroupState = _useGroupState[1];\n\n  var _useState6 = useState(step),\n      limit = _useState6[0],\n      setLimit = _useState6[1];\n\n  var _useState7 = useState(select || onSelect && [] || undefined),\n      selected = _useState7[0],\n      setSelected = _useState7[1];\n\n  useEffect(function () {\n    return setSelected(select || onSelect && [] || undefined);\n  }, [onSelect, select]);\n\n  var _useState8 = useState([]),\n      rowExpand = _useState8[0],\n      setRowExpand = _useState8[1]; // any customized column widths\n\n\n  var _useState9 = useState({}),\n      widths = _useState9[0],\n      setWidths = _useState9[1]; // placeholder placement stuff\n\n\n  var headerRef = useRef();\n  var bodyRef = useRef();\n  var footerRef = useRef();\n\n  var _useState10 = useState(),\n      headerHeight = _useState10[0],\n      setHeaderHeight = _useState10[1];\n\n  var _useState11 = useState(),\n      footerHeight = _useState11[0],\n      setFooterHeight = _useState11[1]; // offset compensation when body overflows\n\n\n  var _useState12 = useState(0),\n      scrollOffset = _useState12[0],\n      setScrollOffset = _useState12[1]; // multiple pinned columns offset\n\n\n  var _useState13 = useState(),\n      pinnedOffset = _useState13[0],\n      setPinnedOffset = _useState13[1];\n\n  var onHeaderWidths = useCallback(function (columnWidths) {\n    var hasSelectColumn = Boolean(select || onSelect);\n    var pinnedProperties = columns.map(function (pinnedColumn) {\n      return pinnedColumn.pin && pinnedColumn.property;\n    }).filter(function (n) {\n      return n;\n    });\n\n    if (hasSelectColumn && pinnedProperties.length > 0) {\n      pinnedProperties = ['_grommetDataTableSelect'].concat(pinnedProperties);\n    }\n\n    var nextPinnedOffset = {};\n\n    if (columnWidths !== []) {\n      pinnedProperties.forEach(function (property, index) {\n        var columnIndex = property === '_grommetDataTableSelect' ? 0 : columns.findIndex(function (column) {\n          return column.property === property;\n        }) + hasSelectColumn;\n\n        if (columnWidths[columnIndex]) {\n          nextPinnedOffset[property] = {\n            width: columnWidths[columnIndex],\n            left: index === 0 ? 0 : nextPinnedOffset[pinnedProperties[index - 1]].left + nextPinnedOffset[pinnedProperties[index - 1]].width\n          };\n        }\n      });\n      setPinnedOffset(nextPinnedOffset);\n    }\n  }, [columns, setPinnedOffset, select, onSelect]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useLayoutEffect(function () {\n    var _bodyRef$current$pare;\n\n    var nextScrollOffset = (((_bodyRef$current$pare = bodyRef.current.parentElement) == null ? void 0 : _bodyRef$current$pare.clientWidth) || 0) - bodyRef.current.clientWidth;\n    if (nextScrollOffset !== scrollOffset) setScrollOffset(nextScrollOffset);\n  });\n  useLayoutEffect(function () {\n    if (placeholder) {\n      if (headerRef.current) {\n        var nextHeaderHeight = headerRef.current.getBoundingClientRect().height;\n        setHeaderHeight(nextHeaderHeight);\n      } else setHeaderHeight(0);\n\n      if (footerRef.current) {\n        var nextFooterHeight = footerRef.current.getBoundingClientRect().height;\n        setFooterHeight(nextFooterHeight);\n      } else setFooterHeight(0);\n    }\n  }, [footerRef, headerRef, placeholder]); // remember that we are filtering on this property\n\n  var onFiltering = function onFiltering(property) {\n    return setFiltering(property);\n  }; // remember the search text we should filter this property by\n\n\n  var onFilter = function onFilter(property, value) {\n    var nextFilters = _extends({}, filters);\n\n    nextFilters[property] = value;\n    setFilters(nextFilters); // Let caller know about search, if interested\n\n    if (onSearch) onSearch(nextFilters);\n  }; // toggle the sort direction on this property\n\n\n  var onSort = function onSort(property) {\n    return function () {\n      var external = sort ? sort.external : false;\n      var direction;\n      if (!sort || property !== sort.property) direction = 'asc';else if (sort.direction === 'asc') direction = 'desc';else direction = 'asc';\n      var nextSort = {\n        property: property,\n        direction: direction,\n        external: external\n      };\n      setSort(nextSort);\n\n      if (onUpdate) {\n        var opts = {\n          count: limit,\n          sort: nextSort\n        };\n\n        if (groups) {\n          opts.expanded = Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          });\n        }\n\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n\n      if (onSortProp) onSortProp(nextSort);\n    };\n  }; // toggle whether the group is expanded\n\n\n  var onToggleGroup = function onToggleGroup(groupValue) {\n    return function () {\n      var nextGroupState = _extends({}, groupState);\n\n      nextGroupState[groupValue] = _extends({}, nextGroupState[groupValue], {\n        expanded: !nextGroupState[groupValue].expanded\n      });\n      setGroupState(nextGroupState);\n      var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n        return nextGroupState[k].expanded;\n      });\n\n      if (onUpdate) {\n        var opts = {\n          expanded: expandedKeys,\n          count: limit\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n\n      if (groupBy.onExpand) {\n        groupBy.onExpand(expandedKeys);\n      }\n    };\n  }; // toggle whether all groups are expanded\n\n\n  var onToggleGroups = function onToggleGroups() {\n    var expanded = Object.keys(groupState).filter(function (k) {\n      return !groupState[k].expanded;\n    }).length === 0;\n    var nextGroupState = {};\n    Object.keys(groupState).forEach(function (k) {\n      nextGroupState[k] = _extends({}, groupState[k], {\n        expanded: !expanded\n      });\n    });\n    setGroupState(nextGroupState);\n    var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n      return nextGroupState[k].expanded;\n    });\n\n    if (onUpdate) {\n      var opts = {\n        expanded: expandedKeys,\n        count: limit\n      };\n      if (showProp) opts.show = showProp;\n      if (sort != null && sort.property) opts.sort = sort;\n      onUpdate(opts);\n    }\n\n    if (groupBy.onExpand) {\n      groupBy.onExpand(expandedKeys);\n    }\n  }; // remember the width this property's column should be\n\n\n  var onResize = useCallback(function (property, width) {\n    if (widths[property] !== width) {\n      var nextWidths = _extends({}, widths);\n\n      nextWidths[property] = width;\n      setWidths(nextWidths);\n    }\n  }, [widths]);\n\n  if (size && resizeable) {\n    console.warn('DataTable cannot combine \"size\" and \"resizeble\".');\n  }\n\n  if (onUpdate && onMore) {\n    console.warn('DataTable cannot combine \"onUpdate\" and \"onMore\".');\n  }\n\n  var _usePagination = usePagination(_extends({\n    data: adjustedData,\n    page: normalizeShow(showProp, step),\n    step: step\n  }, paginate)),\n      items = _usePagination[0],\n      paginationProps = _usePagination[1];\n\n  var Container = paginate ? StyledContainer : Fragment;\n  var containterProps = paginate ? _extends({}, theme.dataTable.container, {\n    fill: fill\n  }) : undefined; // DataTable should overflow if paginating but pagination component\n  // should remain in its location\n\n  var OverflowContainer = paginate ? Box : Fragment;\n  var overflowContainerProps = paginate ? {\n    overflow: {\n      horizontal: 'auto'\n    },\n    flex: false\n  } : undefined; // necessary for Firefox, otherwise paginated DataTable will\n  // not fill its container like it does by default on other\n  // browsers like Chrome/Safari\n\n  var paginatedDataTableProps = paginate && (fill === true || fill === 'horizontal') ? {\n    style: {\n      minWidth: '100%'\n    }\n  } : undefined;\n  return /*#__PURE__*/React.createElement(Container, containterProps, /*#__PURE__*/React.createElement(OverflowContainer, overflowContainerProps, /*#__PURE__*/React.createElement(StyledDataTable, _extends({\n    fillProp: !paginate ? fill : undefined\n  }, paginatedDataTableProps, rest), /*#__PURE__*/React.createElement(Header, {\n    ref: headerRef,\n    cellProps: cellProps.header,\n    columns: columns,\n    data: adjustedData,\n    fill: fill,\n    filtering: filtering,\n    filters: filters,\n    groupBy: groupBy,\n    groups: groups,\n    groupState: groupState,\n    pin: pin === true || pin === 'header',\n    pinnedOffset: pinnedOffset,\n    selected: selected,\n    size: size,\n    sort: sort,\n    widths: widths,\n    onFiltering: onFiltering,\n    onFilter: onFilter,\n    onResize: resizeable ? onResize : undefined,\n    onSelect: onSelect ? function (nextSelected) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected);\n    } : undefined,\n    onSort: sortable || sortProp || onSortProp ? onSort : undefined,\n    onToggle: onToggleGroups,\n    onWidths: onHeaderWidths,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    rowDetails: rowDetails\n  }), groups ? /*#__PURE__*/React.createElement(GroupedBody, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    groupBy: typeof groupBy === 'string' ? {\n      property: groupBy\n    } : groupBy,\n    groups: groups,\n    groupState: groupState,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          expanded: Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          }),\n          count: limit + step\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + step;\n        });\n      }\n    } : onMore,\n    onSelect: onSelect ? function (nextSelected, row) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected, row);\n    } : undefined,\n    onToggle: onToggleGroup,\n    onUpdate: onUpdate,\n    replace: replace,\n    rowProps: rowProps,\n    selected: selected,\n    size: size,\n    step: step\n  }) : /*#__PURE__*/React.createElement(Body, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    data: !paginate ? adjustedData : items,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          count: limit + step\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + step;\n        });\n      }\n    } : onMore,\n    replace: replace,\n    onClickRow: onClickRow,\n    onSelect: onSelect ? function (nextSelected, row) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected, row);\n    } : undefined,\n    pinnedCellProps: cellProps.pinned,\n    pinnedOffset: pinnedOffset,\n    placeholder: placeholder,\n    primaryProperty: primaryProperty,\n    rowProps: rowProps,\n    selected: selected,\n    show: !paginate ? showProp : undefined,\n    size: size,\n    step: step,\n    rowDetails: rowDetails,\n    rowExpand: rowExpand,\n    setRowExpand: setRowExpand\n  }), showFooter && /*#__PURE__*/React.createElement(Footer, {\n    ref: footerRef,\n    cellProps: cellProps.footer,\n    columns: columns,\n    fill: fill,\n    footerValues: footerValues,\n    groups: groups,\n    onSelect: onSelect,\n    pin: pin === true || pin === 'footer',\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    selected: selected,\n    size: size\n  }), placeholder && /*#__PURE__*/React.createElement(StyledPlaceholder, {\n    top: headerHeight,\n    bottom: footerHeight\n  }, typeof placeholder === 'string' ? /*#__PURE__*/React.createElement(Box, {\n    background: {\n      color: 'background-front',\n      opacity: 'strong'\n    },\n    align: \"center\",\n    justify: \"center\",\n    fill: \"vertical\"\n  }, /*#__PURE__*/React.createElement(Text, null, placeholder)) : placeholder))), paginate && adjustedData.length > step && items && items.length ? /*#__PURE__*/React.createElement(Pagination, _extends({\n    alignSelf: \"end\"\n  }, paginationProps)) : null);\n};\n\nDataTable.propTypes = DataTablePropTypes;\nexport { DataTable };","map":{"version":3,"sources":["C:/Personal-Portfolio/node_modules/grommet/es6/components/DataTable/DataTable.js"],"names":["_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","useCallback","useContext","useEffect","useMemo","useRef","useState","Fragment","ThemeContext","defaultProps","useLayoutEffect","Box","Text","Header","Footer","Body","GroupedBody","Pagination","buildFooterValues","buildGroups","buildGroupState","filterAndSortData","initializeFilters","normalizeCellProps","normalizePrimaryProperty","normalizeShow","usePagination","StyledContainer","StyledDataTable","StyledPlaceholder","DataTablePropTypes","useGroupState","groups","groupBy","_useState","groupState","setGroupState","_useState2","prevDeps","setPrevDeps","prevGroups","prevGroupBy","nextGroupState","DataTable","_ref","background","border","_ref$columns","columns","_ref$data","data","fill","onClickRow","onMore","onSearch","onSelect","onSortProp","onSort","onUpdate","replace","pad","paginate","pin","placeholder","primaryKey","resizeable","rowProps","select","showProp","show","size","sortProp","sort","sortable","rowDetails","_ref$step","step","rest","theme","primaryProperty","showFooter","filter","c","footer","_useState3","filtering","setFiltering","_useState4","filters","setFilters","_useState5","setSort","adjustedData","footerValues","cellProps","_useGroupState","_useState6","limit","setLimit","_useState7","undefined","selected","setSelected","_useState8","rowExpand","setRowExpand","_useState9","widths","setWidths","headerRef","bodyRef","footerRef","_useState10","headerHeight","setHeaderHeight","_useState11","footerHeight","setFooterHeight","_useState12","scrollOffset","setScrollOffset","_useState13","pinnedOffset","setPinnedOffset","onHeaderWidths","columnWidths","hasSelectColumn","Boolean","pinnedProperties","map","pinnedColumn","property","n","concat","nextPinnedOffset","forEach","index","columnIndex","findIndex","column","width","left","_bodyRef$current$pare","nextScrollOffset","current","parentElement","clientWidth","nextHeaderHeight","getBoundingClientRect","height","nextFooterHeight","onFiltering","onFilter","value","nextFilters","external","direction","nextSort","opts","count","expanded","k","onToggleGroup","groupValue","expandedKeys","onExpand","onToggleGroups","onResize","nextWidths","console","warn","_usePagination","page","items","paginationProps","Container","containterProps","dataTable","container","OverflowContainer","overflowContainerProps","overflow","horizontal","flex","paginatedDataTableProps","style","minWidth","createElement","fillProp","ref","header","nextSelected","onToggle","onWidths","body","prev","row","pinnedCellProps","pinned","top","bottom","color","opacity","align","justify","alignSelf","propTypes"],"mappings":"AAAA,IAAIA,SAAS,GAAG,CAAC,YAAD,EAAe,QAAf,EAAyB,SAAzB,EAAoC,MAApC,EAA4C,MAA5C,EAAoD,SAApD,EAA+D,YAA/D,EAA6E,QAA7E,EAAuF,UAAvF,EAAmG,UAAnG,EAA+G,QAA/G,EAAyH,UAAzH,EAAqI,SAArI,EAAgJ,KAAhJ,EAAuJ,UAAvJ,EAAmK,KAAnK,EAA0K,aAA1K,EAAyL,YAAzL,EAAuM,YAAvM,EAAqN,UAArN,EAAiO,QAAjO,EAA2O,MAA3O,EAAmP,MAAnP,EAA2P,MAA3P,EAAmQ,UAAnQ,EAA+Q,YAA/Q,EAA6R,MAA7R,CAAhB;;AAEA,SAASC,QAAT,GAAoB;AAAEA,EAAAA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,UAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,WAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,YAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,UAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,WAAOL,MAAP;AAAgB,GAA5P;;AAA8P,SAAOH,QAAQ,CAACY,KAAT,CAAe,IAAf,EAAqBP,SAArB,CAAP;AAAyC;;AAE7T,SAASQ,6BAAT,CAAuCN,MAAvC,EAA+CO,QAA/C,EAAyD;AAAE,MAAIP,MAAM,IAAI,IAAd,EAAoB,OAAO,EAAP;AAAW,MAAIJ,MAAM,GAAG,EAAb;AAAiB,MAAIY,UAAU,GAAGd,MAAM,CAACe,IAAP,CAAYT,MAAZ,CAAjB;AAAsC,MAAIC,GAAJ,EAASJ,CAAT;;AAAY,OAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGW,UAAU,CAACT,MAA3B,EAAmCF,CAAC,EAApC,EAAwC;AAAEI,IAAAA,GAAG,GAAGO,UAAU,CAACX,CAAD,CAAhB;AAAqB,QAAIU,QAAQ,CAACG,OAAT,CAAiBT,GAAjB,KAAyB,CAA7B,EAAgC;AAAUL,IAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;;AAAC,SAAOL,MAAP;AAAgB;;AAEnT,OAAOe,KAAP,IAAgBC,WAAhB,EAA6BC,UAA7B,EAAyCC,SAAzC,EAAoDC,OAApD,EAA6DC,MAA7D,EAAqEC,QAArE,EAA+EC,QAA/E,QAA+F,OAA/F;AACA,SAASC,YAAT,QAA6B,mBAA7B;AACA,SAASC,YAAT,QAA6B,qBAA7B;AACA,SAASC,eAAT,QAAgC,0CAAhC;AACA,SAASC,GAAT,QAAoB,QAApB;AACA,SAASC,IAAT,QAAqB,SAArB;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,SAASC,IAAT,QAAqB,QAArB;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,UAAT,QAA2B,eAA3B;AACA,SAASC,iBAAT,EAA4BC,WAA5B,EAAyCC,eAAzC,EAA0DC,iBAA1D,EAA6EC,iBAA7E,EAAgGC,kBAAhG,EAAoHC,wBAApH,QAAoJ,cAApJ;AACA,SAASC,aAAT,EAAwBC,aAAxB,QAA6C,aAA7C;AACA,SAASC,eAAT,EAA0BC,eAA1B,EAA2CC,iBAA3C,QAAoE,mBAApE;AACA,SAASC,kBAAT,QAAmC,aAAnC;;AAEA,SAASC,aAAT,CAAuBC,MAAvB,EAA+BC,OAA/B,EAAwC;AACtC,MAAIC,SAAS,GAAG5B,QAAQ,CAAC,YAAY;AACnC,WAAOc,eAAe,CAACY,MAAD,EAASC,OAAT,CAAtB;AACD,GAFuB,CAAxB;AAAA,MAGIE,UAAU,GAAGD,SAAS,CAAC,CAAD,CAH1B;AAAA,MAIIE,aAAa,GAAGF,SAAS,CAAC,CAAD,CAJ7B;;AAMA,MAAIG,UAAU,GAAG/B,QAAQ,CAAC;AACxB0B,IAAAA,MAAM,EAAEA,MADgB;AAExBC,IAAAA,OAAO,EAAEA;AAFe,GAAD,CAAzB;AAAA,MAIIK,QAAQ,GAAGD,UAAU,CAAC,CAAD,CAJzB;AAAA,MAKIE,WAAW,GAAGF,UAAU,CAAC,CAAD,CAL5B;;AAOA,MAAIG,UAAU,GAAGF,QAAQ,CAACN,MAA1B;AAAA,MACIS,WAAW,GAAGH,QAAQ,CAACL,OAD3B;;AAGA,MAAID,MAAM,KAAKQ,UAAX,IAAyBP,OAAO,KAAKQ,WAAzC,EAAsD;AACpDF,IAAAA,WAAW,CAAC;AACVP,MAAAA,MAAM,EAAEA,MADE;AAEVC,MAAAA,OAAO,EAAEA;AAFC,KAAD,CAAX;AAIA,QAAIS,cAAc,GAAGtB,eAAe,CAACY,MAAD,EAASC,OAAT,CAApC;AACAG,IAAAA,aAAa,CAACM,cAAD,CAAb;AACA,WAAO,CAACA,cAAD,EAAiBN,aAAjB,CAAP;AACD;;AAED,SAAO,CAACD,UAAD,EAAaC,aAAb,CAAP;AACD;;AAED,IAAIO,SAAS,GAAG,SAASA,SAAT,CAAmBC,IAAnB,EAAyB;AACvC,MAAIC,UAAU,GAAGD,IAAI,CAACC,UAAtB;AAAA,MACIC,MAAM,GAAGF,IAAI,CAACE,MADlB;AAAA,MAEIC,YAAY,GAAGH,IAAI,CAACI,OAFxB;AAAA,MAGIA,OAAO,GAAGD,YAAY,KAAK,KAAK,CAAtB,GAA0B,EAA1B,GAA+BA,YAH7C;AAAA,MAIIE,SAAS,GAAGL,IAAI,CAACM,IAJrB;AAAA,MAKIA,IAAI,GAAGD,SAAS,KAAK,KAAK,CAAnB,GAAuB,EAAvB,GAA4BA,SALvC;AAAA,MAMIE,IAAI,GAAGP,IAAI,CAACO,IANhB;AAAA,MAOIlB,OAAO,GAAGW,IAAI,CAACX,OAPnB;AAAA,MAQImB,UAAU,GAAGR,IAAI,CAACQ,UARtB;AAAA,MASIC,MAAM,GAAGT,IAAI,CAACS,MATlB;AAAA,MAUIC,QAAQ,GAAGV,IAAI,CAACU,QAVpB;AAAA,MAWIC,QAAQ,GAAGX,IAAI,CAACW,QAXpB;AAAA,MAYIC,UAAU,GAAGZ,IAAI,CAACa,MAZtB;AAAA,MAaIC,QAAQ,GAAGd,IAAI,CAACc,QAbpB;AAAA,MAcIC,OAAO,GAAGf,IAAI,CAACe,OAdnB;AAAA,MAeIC,GAAG,GAAGhB,IAAI,CAACgB,GAff;AAAA,MAgBIC,QAAQ,GAAGjB,IAAI,CAACiB,QAhBpB;AAAA,MAiBIC,GAAG,GAAGlB,IAAI,CAACkB,GAjBf;AAAA,MAkBIC,WAAW,GAAGnB,IAAI,CAACmB,WAlBvB;AAAA,MAmBIC,UAAU,GAAGpB,IAAI,CAACoB,UAnBtB;AAAA,MAoBIC,UAAU,GAAGrB,IAAI,CAACqB,UApBtB;AAAA,MAqBIC,QAAQ,GAAGtB,IAAI,CAACsB,QArBpB;AAAA,MAsBIC,MAAM,GAAGvB,IAAI,CAACuB,MAtBlB;AAAA,MAuBIC,QAAQ,GAAGxB,IAAI,CAACyB,IAvBpB;AAAA,MAwBIC,IAAI,GAAG1B,IAAI,CAAC0B,IAxBhB;AAAA,MAyBIC,QAAQ,GAAG3B,IAAI,CAAC4B,IAzBpB;AAAA,MA0BIC,QAAQ,GAAG7B,IAAI,CAAC6B,QA1BpB;AAAA,MA2BIC,UAAU,GAAG9B,IAAI,CAAC8B,UA3BtB;AAAA,MA4BIC,SAAS,GAAG/B,IAAI,CAACgC,IA5BrB;AAAA,MA6BIA,IAAI,GAAGD,SAAS,KAAK,KAAK,CAAnB,GAAuB,EAAvB,GAA4BA,SA7BvC;AAAA,MA8BIE,IAAI,GAAGlF,6BAA6B,CAACiD,IAAD,EAAO/D,SAAP,CA9BxC;;AAgCA,MAAIiG,KAAK,GAAG5E,UAAU,CAACM,YAAD,CAAV,IAA4BC,YAAY,CAACqE,KAArD,CAjCuC,CAiCqB;;AAE5D,MAAIC,eAAe,GAAG3E,OAAO,CAAC,YAAY;AACxC,WAAOoB,wBAAwB,CAACwB,OAAD,EAAUgB,UAAV,CAA/B;AACD,GAF4B,EAE1B,CAAChB,OAAD,EAAUgB,UAAV,CAF0B,CAA7B,CAnCuC,CAqCZ;;AAE3B,MAAIgB,UAAU,GAAG5E,OAAO,CAAC,YAAY;AACnC,WAAO4C,OAAO,CAACiC,MAAR,CAAe,UAAUC,CAAV,EAAa;AACjC,aAAOA,CAAC,CAACC,MAAT;AACD,KAFM,EAEJ/F,MAFI,GAEK,CAFZ;AAGD,GAJuB,EAIrB,CAAC4D,OAAD,CAJqB,CAAxB,CAvCuC,CA2CxB;;AAEf,MAAIoC,UAAU,GAAG9E,QAAQ,EAAzB;AAAA,MACI+E,SAAS,GAAGD,UAAU,CAAC,CAAD,CAD1B;AAAA,MAEIE,YAAY,GAAGF,UAAU,CAAC,CAAD,CAF7B,CA7CuC,CA+CL;;;AAGlC,MAAIG,UAAU,GAAGjF,QAAQ,CAACgB,iBAAiB,CAAC0B,OAAD,CAAlB,CAAzB;AAAA,MACIwC,OAAO,GAAGD,UAAU,CAAC,CAAD,CADxB;AAAA,MAEIE,UAAU,GAAGF,UAAU,CAAC,CAAD,CAF3B,CAlDuC,CAoDP;;;AAGhC,MAAIG,UAAU,GAAGpF,QAAQ,CAACiE,QAAQ,IAAI,EAAb,CAAzB;AAAA,MACIC,IAAI,GAAGkB,UAAU,CAAC,CAAD,CADrB;AAAA,MAEIC,OAAO,GAAGD,UAAU,CAAC,CAAD,CAFxB,CAvDuC,CAyDV;AAC7B;AACA;;;AAGA,MAAIE,YAAY,GAAGxF,OAAO,CAAC,YAAY;AACrC,WAAOsD,QAAQ,GAAGR,IAAH,GAAU7B,iBAAiB,CAAC6B,IAAD,EAAOsC,OAAP,EAAgBlC,QAAhB,EAA0BkB,IAA1B,CAA1C;AACD,GAFyB,EAEvB,CAACtB,IAAD,EAAOsC,OAAP,EAAgBlC,QAAhB,EAA0BI,QAA1B,EAAoCc,IAApC,CAFuB,CAA1B,CA9DuC,CAgEQ;;AAE/C,MAAIqB,YAAY,GAAGzF,OAAO,CAAC,YAAY;AACrC,WAAOc,iBAAiB,CAAC8B,OAAD,EAAU4C,YAAV,CAAxB;AACD,GAFyB,EAEvB,CAACA,YAAD,EAAe5C,OAAf,CAFuB,CAA1B,CAlEuC,CAoEV;;AAE7B,MAAI8C,SAAS,GAAG1F,OAAO,CAAC,YAAY;AAClC,WAAOmB,kBAAkB,CAAC;AACxBsB,MAAAA,UAAU,EAAEA,UADY;AAExBC,MAAAA,MAAM,EAAEA,MAFgB;AAGxBc,MAAAA,GAAG,EAAEA,GAHmB;AAIxBE,MAAAA,GAAG,EAAEA;AAJmB,KAAD,EAKtBgB,KALsB,CAAzB;AAMD,GAPsB,EAOpB,CAACjC,UAAD,EAAaC,MAAb,EAAqBc,GAArB,EAA0BE,GAA1B,EAA+BgB,KAA/B,CAPoB,CAAvB,CAtEuC,CA6EI;;AAE3C,MAAI9C,MAAM,GAAG5B,OAAO,CAAC,YAAY;AAC/B,WAAOe,WAAW,CAAC6B,OAAD,EAAU4C,YAAV,EAAwB3D,OAAxB,EAAiC8C,eAAjC,CAAlB;AACD,GAFmB,EAEjB,CAACa,YAAD,EAAe5C,OAAf,EAAwBf,OAAxB,EAAiC8C,eAAjC,CAFiB,CAApB,CA/EuC,CAiFgB;;AAEvD,MAAIgB,cAAc,GAAGhE,aAAa,CAACC,MAAD,EAASC,OAAT,CAAlC;AAAA,MACIE,UAAU,GAAG4D,cAAc,CAAC,CAAD,CAD/B;AAAA,MAEI3D,aAAa,GAAG2D,cAAc,CAAC,CAAD,CAFlC;;AAIA,MAAIC,UAAU,GAAG1F,QAAQ,CAACsE,IAAD,CAAzB;AAAA,MACIqB,KAAK,GAAGD,UAAU,CAAC,CAAD,CADtB;AAAA,MAEIE,QAAQ,GAAGF,UAAU,CAAC,CAAD,CAFzB;;AAIA,MAAIG,UAAU,GAAG7F,QAAQ,CAAC6D,MAAM,IAAIZ,QAAQ,IAAI,EAAtB,IAA4B6C,SAA7B,CAAzB;AAAA,MACIC,QAAQ,GAAGF,UAAU,CAAC,CAAD,CADzB;AAAA,MAEIG,WAAW,GAAGH,UAAU,CAAC,CAAD,CAF5B;;AAIAhG,EAAAA,SAAS,CAAC,YAAY;AACpB,WAAOmG,WAAW,CAACnC,MAAM,IAAIZ,QAAQ,IAAI,EAAtB,IAA4B6C,SAA7B,CAAlB;AACD,GAFQ,EAEN,CAAC7C,QAAD,EAAWY,MAAX,CAFM,CAAT;;AAIA,MAAIoC,UAAU,GAAGjG,QAAQ,CAAC,EAAD,CAAzB;AAAA,MACIkG,SAAS,GAAGD,UAAU,CAAC,CAAD,CAD1B;AAAA,MAEIE,YAAY,GAAGF,UAAU,CAAC,CAAD,CAF7B,CAnGuC,CAqGL;;;AAGlC,MAAIG,UAAU,GAAGpG,QAAQ,CAAC,EAAD,CAAzB;AAAA,MACIqG,MAAM,GAAGD,UAAU,CAAC,CAAD,CADvB;AAAA,MAEIE,SAAS,GAAGF,UAAU,CAAC,CAAD,CAF1B,CAxGuC,CA0GR;;;AAG/B,MAAIG,SAAS,GAAGxG,MAAM,EAAtB;AACA,MAAIyG,OAAO,GAAGzG,MAAM,EAApB;AACA,MAAI0G,SAAS,GAAG1G,MAAM,EAAtB;;AAEA,MAAI2G,WAAW,GAAG1G,QAAQ,EAA1B;AAAA,MACI2G,YAAY,GAAGD,WAAW,CAAC,CAAD,CAD9B;AAAA,MAEIE,eAAe,GAAGF,WAAW,CAAC,CAAD,CAFjC;;AAIA,MAAIG,WAAW,GAAG7G,QAAQ,EAA1B;AAAA,MACI8G,YAAY,GAAGD,WAAW,CAAC,CAAD,CAD9B;AAAA,MAEIE,eAAe,GAAGF,WAAW,CAAC,CAAD,CAFjC,CArHuC,CAuHD;;;AAGtC,MAAIG,WAAW,GAAGhH,QAAQ,CAAC,CAAD,CAA1B;AAAA,MACIiH,YAAY,GAAGD,WAAW,CAAC,CAAD,CAD9B;AAAA,MAEIE,eAAe,GAAGF,WAAW,CAAC,CAAD,CAFjC,CA1HuC,CA4HD;;;AAGtC,MAAIG,WAAW,GAAGnH,QAAQ,EAA1B;AAAA,MACIoH,YAAY,GAAGD,WAAW,CAAC,CAAD,CAD9B;AAAA,MAEIE,eAAe,GAAGF,WAAW,CAAC,CAAD,CAFjC;;AAIA,MAAIG,cAAc,GAAG3H,WAAW,CAAC,UAAU4H,YAAV,EAAwB;AACvD,QAAIC,eAAe,GAAGC,OAAO,CAAC5D,MAAM,IAAIZ,QAAX,CAA7B;AACA,QAAIyE,gBAAgB,GAAGhF,OAAO,CAACiF,GAAR,CAAY,UAAUC,YAAV,EAAwB;AACzD,aAAOA,YAAY,CAACpE,GAAb,IAAoBoE,YAAY,CAACC,QAAxC;AACD,KAFsB,EAEpBlD,MAFoB,CAEb,UAAUmD,CAAV,EAAa;AACrB,aAAOA,CAAP;AACD,KAJsB,CAAvB;;AAMA,QAAIN,eAAe,IAAIE,gBAAgB,CAAC5I,MAAjB,GAA0B,CAAjD,EAAoD;AAClD4I,MAAAA,gBAAgB,GAAG,CAAC,yBAAD,EAA4BK,MAA5B,CAAmCL,gBAAnC,CAAnB;AACD;;AAED,QAAIM,gBAAgB,GAAG,EAAvB;;AAEA,QAAIT,YAAY,KAAK,EAArB,EAAyB;AACvBG,MAAAA,gBAAgB,CAACO,OAAjB,CAAyB,UAAUJ,QAAV,EAAoBK,KAApB,EAA2B;AAClD,YAAIC,WAAW,GAAGN,QAAQ,KAAK,yBAAb,GAAyC,CAAzC,GAA6CnF,OAAO,CAAC0F,SAAR,CAAkB,UAAUC,MAAV,EAAkB;AACjG,iBAAOA,MAAM,CAACR,QAAP,KAAoBA,QAA3B;AACD,SAF8D,IAE1DL,eAFL;;AAIA,YAAID,YAAY,CAACY,WAAD,CAAhB,EAA+B;AAC7BH,UAAAA,gBAAgB,CAACH,QAAD,CAAhB,GAA6B;AAC3BS,YAAAA,KAAK,EAAEf,YAAY,CAACY,WAAD,CADQ;AAE3BI,YAAAA,IAAI,EAAEL,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkBF,gBAAgB,CAACN,gBAAgB,CAACQ,KAAK,GAAG,CAAT,CAAjB,CAAhB,CAA8CK,IAA9C,GAAqDP,gBAAgB,CAACN,gBAAgB,CAACQ,KAAK,GAAG,CAAT,CAAjB,CAAhB,CAA8CI;AAFhG,WAA7B;AAID;AACF,OAXD;AAYAjB,MAAAA,eAAe,CAACW,gBAAD,CAAf;AACD;AACF,GA7B+B,EA6B7B,CAACtF,OAAD,EAAU2E,eAAV,EAA2BxD,MAA3B,EAAmCZ,QAAnC,CA7B6B,CAAhC,CAnIuC,CAgKW;;AAElD7C,EAAAA,eAAe,CAAC,YAAY;AAC1B,QAAIoI,qBAAJ;;AAEA,QAAIC,gBAAgB,GAAG,CAAC,CAAC,CAACD,qBAAqB,GAAGhC,OAAO,CAACkC,OAAR,CAAgBC,aAAzC,KAA2D,IAA3D,GAAkE,KAAK,CAAvE,GAA2EH,qBAAqB,CAACI,WAAlG,KAAkH,CAAnH,IAAwHpC,OAAO,CAACkC,OAAR,CAAgBE,WAA/J;AACA,QAAIH,gBAAgB,KAAKxB,YAAzB,EAAuCC,eAAe,CAACuB,gBAAD,CAAf;AACxC,GALc,CAAf;AAMArI,EAAAA,eAAe,CAAC,YAAY;AAC1B,QAAIqD,WAAJ,EAAiB;AACf,UAAI8C,SAAS,CAACmC,OAAd,EAAuB;AACrB,YAAIG,gBAAgB,GAAGtC,SAAS,CAACmC,OAAV,CAAkBI,qBAAlB,GAA0CC,MAAjE;AACAnC,QAAAA,eAAe,CAACiC,gBAAD,CAAf;AACD,OAHD,MAGOjC,eAAe,CAAC,CAAD,CAAf;;AAEP,UAAIH,SAAS,CAACiC,OAAd,EAAuB;AACrB,YAAIM,gBAAgB,GAAGvC,SAAS,CAACiC,OAAV,CAAkBI,qBAAlB,GAA0CC,MAAjE;AACAhC,QAAAA,eAAe,CAACiC,gBAAD,CAAf;AACD,OAHD,MAGOjC,eAAe,CAAC,CAAD,CAAf;AACR;AACF,GAZc,EAYZ,CAACN,SAAD,EAAYF,SAAZ,EAAuB9C,WAAvB,CAZY,CAAf,CAxKuC,CAoLE;;AAEzC,MAAIwF,WAAW,GAAG,SAASA,WAAT,CAAqBpB,QAArB,EAA+B;AAC/C,WAAO7C,YAAY,CAAC6C,QAAD,CAAnB;AACD,GAFD,CAtLuC,CAwLpC;;;AAGH,MAAIqB,QAAQ,GAAG,SAASA,QAAT,CAAkBrB,QAAlB,EAA4BsB,KAA5B,EAAmC;AAChD,QAAIC,WAAW,GAAG5K,QAAQ,CAAC,EAAD,EAAK0G,OAAL,CAA1B;;AAEAkE,IAAAA,WAAW,CAACvB,QAAD,CAAX,GAAwBsB,KAAxB;AACAhE,IAAAA,UAAU,CAACiE,WAAD,CAAV,CAJgD,CAIvB;;AAEzB,QAAIpG,QAAJ,EAAcA,QAAQ,CAACoG,WAAD,CAAR;AACf,GAPD,CA3LuC,CAkMpC;;;AAGH,MAAIjG,MAAM,GAAG,SAASA,MAAT,CAAgB0E,QAAhB,EAA0B;AACrC,WAAO,YAAY;AACjB,UAAIwB,QAAQ,GAAGnF,IAAI,GAAGA,IAAI,CAACmF,QAAR,GAAmB,KAAtC;AACA,UAAIC,SAAJ;AACA,UAAI,CAACpF,IAAD,IAAS2D,QAAQ,KAAK3D,IAAI,CAAC2D,QAA/B,EAAyCyB,SAAS,GAAG,KAAZ,CAAzC,KAAgE,IAAIpF,IAAI,CAACoF,SAAL,KAAmB,KAAvB,EAA8BA,SAAS,GAAG,MAAZ,CAA9B,KAAsDA,SAAS,GAAG,KAAZ;AACtH,UAAIC,QAAQ,GAAG;AACb1B,QAAAA,QAAQ,EAAEA,QADG;AAEbyB,QAAAA,SAAS,EAAEA,SAFE;AAGbD,QAAAA,QAAQ,EAAEA;AAHG,OAAf;AAKAhE,MAAAA,OAAO,CAACkE,QAAD,CAAP;;AAEA,UAAInG,QAAJ,EAAc;AACZ,YAAIoG,IAAI,GAAG;AACTC,UAAAA,KAAK,EAAE9D,KADE;AAETzB,UAAAA,IAAI,EAAEqF;AAFG,SAAX;;AAKA,YAAI7H,MAAJ,EAAY;AACV8H,UAAAA,IAAI,CAACE,QAAL,GAAgBjL,MAAM,CAACe,IAAP,CAAYqC,UAAZ,EAAwB8C,MAAxB,CAA+B,UAAUgF,CAAV,EAAa;AAC1D,mBAAO9H,UAAU,CAAC8H,CAAD,CAAV,CAAcD,QAArB;AACD,WAFe,CAAhB;AAGD;;AAED,YAAI5F,QAAJ,EAAc0F,IAAI,CAACzF,IAAL,GAAYD,QAAZ;AACdV,QAAAA,QAAQ,CAACoG,IAAD,CAAR;AACD;;AAED,UAAItG,UAAJ,EAAgBA,UAAU,CAACqG,QAAD,CAAV;AACjB,KA5BD;AA6BD,GA9BD,CArMuC,CAmOpC;;;AAGH,MAAIK,aAAa,GAAG,SAASA,aAAT,CAAuBC,UAAvB,EAAmC;AACrD,WAAO,YAAY;AACjB,UAAIzH,cAAc,GAAG5D,QAAQ,CAAC,EAAD,EAAKqD,UAAL,CAA7B;;AAEAO,MAAAA,cAAc,CAACyH,UAAD,CAAd,GAA6BrL,QAAQ,CAAC,EAAD,EAAK4D,cAAc,CAACyH,UAAD,CAAnB,EAAiC;AACpEH,QAAAA,QAAQ,EAAE,CAACtH,cAAc,CAACyH,UAAD,CAAd,CAA2BH;AAD8B,OAAjC,CAArC;AAGA5H,MAAAA,aAAa,CAACM,cAAD,CAAb;AACA,UAAI0H,YAAY,GAAGrL,MAAM,CAACe,IAAP,CAAY4C,cAAZ,EAA4BuC,MAA5B,CAAmC,UAAUgF,CAAV,EAAa;AACjE,eAAOvH,cAAc,CAACuH,CAAD,CAAd,CAAkBD,QAAzB;AACD,OAFkB,CAAnB;;AAIA,UAAItG,QAAJ,EAAc;AACZ,YAAIoG,IAAI,GAAG;AACTE,UAAAA,QAAQ,EAAEI,YADD;AAETL,UAAAA,KAAK,EAAE9D;AAFE,SAAX;AAIA,YAAIzB,IAAI,IAAI,IAAR,IAAgBA,IAAI,CAAC2D,QAAzB,EAAmC2B,IAAI,CAACtF,IAAL,GAAYA,IAAZ;AACnC,YAAIJ,QAAJ,EAAc0F,IAAI,CAACzF,IAAL,GAAYD,QAAZ;AACdV,QAAAA,QAAQ,CAACoG,IAAD,CAAR;AACD;;AAED,UAAI7H,OAAO,CAACoI,QAAZ,EAAsB;AACpBpI,QAAAA,OAAO,CAACoI,QAAR,CAAiBD,YAAjB;AACD;AACF,KAxBD;AAyBD,GA1BD,CAtOuC,CAgQpC;;;AAGH,MAAIE,cAAc,GAAG,SAASA,cAAT,GAA0B;AAC7C,QAAIN,QAAQ,GAAGjL,MAAM,CAACe,IAAP,CAAYqC,UAAZ,EAAwB8C,MAAxB,CAA+B,UAAUgF,CAAV,EAAa;AACzD,aAAO,CAAC9H,UAAU,CAAC8H,CAAD,CAAV,CAAcD,QAAtB;AACD,KAFc,EAEZ5K,MAFY,KAED,CAFd;AAGA,QAAIsD,cAAc,GAAG,EAArB;AACA3D,IAAAA,MAAM,CAACe,IAAP,CAAYqC,UAAZ,EAAwBoG,OAAxB,CAAgC,UAAU0B,CAAV,EAAa;AAC3CvH,MAAAA,cAAc,CAACuH,CAAD,CAAd,GAAoBnL,QAAQ,CAAC,EAAD,EAAKqD,UAAU,CAAC8H,CAAD,CAAf,EAAoB;AAC9CD,QAAAA,QAAQ,EAAE,CAACA;AADmC,OAApB,CAA5B;AAGD,KAJD;AAKA5H,IAAAA,aAAa,CAACM,cAAD,CAAb;AACA,QAAI0H,YAAY,GAAGrL,MAAM,CAACe,IAAP,CAAY4C,cAAZ,EAA4BuC,MAA5B,CAAmC,UAAUgF,CAAV,EAAa;AACjE,aAAOvH,cAAc,CAACuH,CAAD,CAAd,CAAkBD,QAAzB;AACD,KAFkB,CAAnB;;AAIA,QAAItG,QAAJ,EAAc;AACZ,UAAIoG,IAAI,GAAG;AACTE,QAAAA,QAAQ,EAAEI,YADD;AAETL,QAAAA,KAAK,EAAE9D;AAFE,OAAX;AAIA,UAAI7B,QAAJ,EAAc0F,IAAI,CAACzF,IAAL,GAAYD,QAAZ;AACd,UAAII,IAAI,IAAI,IAAR,IAAgBA,IAAI,CAAC2D,QAAzB,EAAmC2B,IAAI,CAACtF,IAAL,GAAYA,IAAZ;AACnCd,MAAAA,QAAQ,CAACoG,IAAD,CAAR;AACD;;AAED,QAAI7H,OAAO,CAACoI,QAAZ,EAAsB;AACpBpI,MAAAA,OAAO,CAACoI,QAAR,CAAiBD,YAAjB;AACD;AACF,GA5BD,CAnQuC,CA+RpC;;;AAGH,MAAIG,QAAQ,GAAGtK,WAAW,CAAC,UAAUkI,QAAV,EAAoBS,KAApB,EAA2B;AACpD,QAAIjC,MAAM,CAACwB,QAAD,CAAN,KAAqBS,KAAzB,EAAgC;AAC9B,UAAI4B,UAAU,GAAG1L,QAAQ,CAAC,EAAD,EAAK6H,MAAL,CAAzB;;AAEA6D,MAAAA,UAAU,CAACrC,QAAD,CAAV,GAAuBS,KAAvB;AACAhC,MAAAA,SAAS,CAAC4D,UAAD,CAAT;AACD;AACF,GAPyB,EAOvB,CAAC7D,MAAD,CAPuB,CAA1B;;AASA,MAAIrC,IAAI,IAAIL,UAAZ,EAAwB;AACtBwG,IAAAA,OAAO,CAACC,IAAR,CAAa,kDAAb;AACD;;AAED,MAAIhH,QAAQ,IAAIL,MAAhB,EAAwB;AACtBoH,IAAAA,OAAO,CAACC,IAAR,CAAa,mDAAb;AACD;;AAED,MAAIC,cAAc,GAAGjJ,aAAa,CAAC5C,QAAQ,CAAC;AAC1CoE,IAAAA,IAAI,EAAE0C,YADoC;AAE1CgF,IAAAA,IAAI,EAAEnJ,aAAa,CAAC2C,QAAD,EAAWQ,IAAX,CAFuB;AAG1CA,IAAAA,IAAI,EAAEA;AAHoC,GAAD,EAIxCf,QAJwC,CAAT,CAAlC;AAAA,MAKIgH,KAAK,GAAGF,cAAc,CAAC,CAAD,CAL1B;AAAA,MAMIG,eAAe,GAAGH,cAAc,CAAC,CAAD,CANpC;;AAQA,MAAII,SAAS,GAAGlH,QAAQ,GAAGlC,eAAH,GAAqBpB,QAA7C;AACA,MAAIyK,eAAe,GAAGnH,QAAQ,GAAG/E,QAAQ,CAAC,EAAD,EAAKgG,KAAK,CAACmG,SAAN,CAAgBC,SAArB,EAAgC;AACvE/H,IAAAA,IAAI,EAAEA;AADiE,GAAhC,CAAX,GAEzBiD,SAFL,CA5TuC,CA8TvB;AAChB;;AAEA,MAAI+E,iBAAiB,GAAGtH,QAAQ,GAAGlD,GAAH,GAASJ,QAAzC;AACA,MAAI6K,sBAAsB,GAAGvH,QAAQ,GAAG;AACtCwH,IAAAA,QAAQ,EAAE;AACRC,MAAAA,UAAU,EAAE;AADJ,KAD4B;AAItCC,IAAAA,IAAI,EAAE;AAJgC,GAAH,GAKjCnF,SALJ,CAlUuC,CAuUxB;AACf;AACA;;AAEA,MAAIoF,uBAAuB,GAAG3H,QAAQ,KAAKV,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,YAA/B,CAAR,GAAuD;AACnFsI,IAAAA,KAAK,EAAE;AACLC,MAAAA,QAAQ,EAAE;AADL;AAD4E,GAAvD,GAI1BtF,SAJJ;AAKA,SAAO,aAAapG,KAAK,CAAC2L,aAAN,CAAoBZ,SAApB,EAA+BC,eAA/B,EAAgD,aAAahL,KAAK,CAAC2L,aAAN,CAAoBR,iBAApB,EAAuCC,sBAAvC,EAA+D,aAAapL,KAAK,CAAC2L,aAAN,CAAoB/J,eAApB,EAAqC9C,QAAQ,CAAC;AACzM8M,IAAAA,QAAQ,EAAE,CAAC/H,QAAD,GAAYV,IAAZ,GAAmBiD;AAD4K,GAAD,EAEvMoF,uBAFuM,EAE9K3G,IAF8K,CAA7C,EAE1H,aAAa7E,KAAK,CAAC2L,aAAN,CAAoB9K,MAApB,EAA4B;AAC1EgL,IAAAA,GAAG,EAAEhF,SADqE;AAE1Ef,IAAAA,SAAS,EAAEA,SAAS,CAACgG,MAFqD;AAG1E9I,IAAAA,OAAO,EAAEA,OAHiE;AAI1EE,IAAAA,IAAI,EAAE0C,YAJoE;AAK1EzC,IAAAA,IAAI,EAAEA,IALoE;AAM1EkC,IAAAA,SAAS,EAAEA,SAN+D;AAO1EG,IAAAA,OAAO,EAAEA,OAPiE;AAQ1EvD,IAAAA,OAAO,EAAEA,OARiE;AAS1ED,IAAAA,MAAM,EAAEA,MATkE;AAU1EG,IAAAA,UAAU,EAAEA,UAV8D;AAW1E2B,IAAAA,GAAG,EAAEA,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,QAX6C;AAY1E4D,IAAAA,YAAY,EAAEA,YAZ4D;AAa1ErB,IAAAA,QAAQ,EAAEA,QAbgE;AAc1E/B,IAAAA,IAAI,EAAEA,IAdoE;AAe1EE,IAAAA,IAAI,EAAEA,IAfoE;AAgB1EmC,IAAAA,MAAM,EAAEA,MAhBkE;AAiB1E4C,IAAAA,WAAW,EAAEA,WAjB6D;AAkB1EC,IAAAA,QAAQ,EAAEA,QAlBgE;AAmB1Ee,IAAAA,QAAQ,EAAEtG,UAAU,GAAGsG,QAAH,GAAcnE,SAnBwC;AAoB1E7C,IAAAA,QAAQ,EAAEA,QAAQ,GAAG,UAAUwI,YAAV,EAAwB;AAC3CzF,MAAAA,WAAW,CAACyF,YAAD,CAAX;AACA,UAAIxI,QAAJ,EAAcA,QAAQ,CAACwI,YAAD,CAAR;AACf,KAHiB,GAGd3F,SAvBsE;AAwB1E3C,IAAAA,MAAM,EAAEgB,QAAQ,IAAIF,QAAZ,IAAwBf,UAAxB,GAAqCC,MAArC,GAA8C2C,SAxBoB;AAyB1E4F,IAAAA,QAAQ,EAAE1B,cAzBgE;AA0B1E2B,IAAAA,QAAQ,EAAErE,cA1BgE;AA2B1E7C,IAAAA,eAAe,EAAEA,eA3ByD;AA4B1EwC,IAAAA,YAAY,EAAEA,YA5B4D;AA6B1E7C,IAAAA,UAAU,EAAEA;AA7B8D,GAA5B,CAF6G,EAgCzJ1C,MAAM,GAAG,aAAahC,KAAK,CAAC2L,aAAN,CAAoB3K,WAApB,EAAiC;AACzD6K,IAAAA,GAAG,EAAE/E,OADoD;AAEzDhB,IAAAA,SAAS,EAAEA,SAAS,CAACoG,IAFoC;AAGzDlJ,IAAAA,OAAO,EAAEA,OAHgD;AAIzDf,IAAAA,OAAO,EAAE,OAAOA,OAAP,KAAmB,QAAnB,GAA8B;AACrCkG,MAAAA,QAAQ,EAAElG;AAD2B,KAA9B,GAELA,OANqD;AAOzDD,IAAAA,MAAM,EAAEA,MAPiD;AAQzDG,IAAAA,UAAU,EAAEA,UAR6C;AASzDuF,IAAAA,YAAY,EAAEA,YAT2C;AAUzD3C,IAAAA,eAAe,EAAEA,eAVwC;AAWzD1B,IAAAA,MAAM,EAAEK,QAAQ,GAAG,YAAY;AAC7B,UAAIkC,YAAY,CAACxG,MAAb,KAAwB6G,KAA5B,EAAmC;AACjC,YAAI6D,IAAI,GAAG;AACTE,UAAAA,QAAQ,EAAEjL,MAAM,CAACe,IAAP,CAAYqC,UAAZ,EAAwB8C,MAAxB,CAA+B,UAAUgF,CAAV,EAAa;AACpD,mBAAO9H,UAAU,CAAC8H,CAAD,CAAV,CAAcD,QAArB;AACD,WAFS,CADD;AAITD,UAAAA,KAAK,EAAE9D,KAAK,GAAGrB;AAJN,SAAX;AAMA,YAAIJ,IAAI,IAAI,IAAR,IAAgBA,IAAI,CAAC2D,QAAzB,EAAmC2B,IAAI,CAACtF,IAAL,GAAYA,IAAZ;AACnC,YAAIJ,QAAJ,EAAc0F,IAAI,CAACzF,IAAL,GAAYD,QAAZ;AACdV,QAAAA,QAAQ,CAACoG,IAAD,CAAR;AACA5D,QAAAA,QAAQ,CAAC,UAAUiG,IAAV,EAAgB;AACvB,iBAAOA,IAAI,GAAGvH,IAAd;AACD,SAFO,CAAR;AAGD;AACF,KAfe,GAeZvB,MA1BqD;AA2BzDE,IAAAA,QAAQ,EAAEA,QAAQ,GAAG,UAAUwI,YAAV,EAAwBK,GAAxB,EAA6B;AAChD9F,MAAAA,WAAW,CAACyF,YAAD,CAAX;AACA,UAAIxI,QAAJ,EAAcA,QAAQ,CAACwI,YAAD,EAAeK,GAAf,CAAR;AACf,KAHiB,GAGdhG,SA9BqD;AA+BzD4F,IAAAA,QAAQ,EAAE9B,aA/B+C;AAgCzDxG,IAAAA,QAAQ,EAAEA,QAhC+C;AAiCzDC,IAAAA,OAAO,EAAEA,OAjCgD;AAkCzDO,IAAAA,QAAQ,EAAEA,QAlC+C;AAmCzDmC,IAAAA,QAAQ,EAAEA,QAnC+C;AAoCzD/B,IAAAA,IAAI,EAAEA,IApCmD;AAqCzDM,IAAAA,IAAI,EAAEA;AArCmD,GAAjC,CAAhB,GAsCL,aAAa5E,KAAK,CAAC2L,aAAN,CAAoB5K,IAApB,EAA0B;AAC1C8K,IAAAA,GAAG,EAAE/E,OADqC;AAE1ChB,IAAAA,SAAS,EAAEA,SAAS,CAACoG,IAFqB;AAG1ClJ,IAAAA,OAAO,EAAEA,OAHiC;AAI1CE,IAAAA,IAAI,EAAE,CAACW,QAAD,GAAY+B,YAAZ,GAA2BiF,KAJS;AAK1CxH,IAAAA,MAAM,EAAEK,QAAQ,GAAG,YAAY;AAC7B,UAAIkC,YAAY,CAACxG,MAAb,KAAwB6G,KAA5B,EAAmC;AACjC,YAAI6D,IAAI,GAAG;AACTC,UAAAA,KAAK,EAAE9D,KAAK,GAAGrB;AADN,SAAX;AAGA,YAAIJ,IAAI,IAAI,IAAR,IAAgBA,IAAI,CAAC2D,QAAzB,EAAmC2B,IAAI,CAACtF,IAAL,GAAYA,IAAZ;AACnC,YAAIJ,QAAJ,EAAc0F,IAAI,CAACzF,IAAL,GAAYD,QAAZ;AACdV,QAAAA,QAAQ,CAACoG,IAAD,CAAR;AACA5D,QAAAA,QAAQ,CAAC,UAAUiG,IAAV,EAAgB;AACvB,iBAAOA,IAAI,GAAGvH,IAAd;AACD,SAFO,CAAR;AAGD;AACF,KAZe,GAYZvB,MAjBsC;AAkB1CM,IAAAA,OAAO,EAAEA,OAlBiC;AAmB1CP,IAAAA,UAAU,EAAEA,UAnB8B;AAoB1CG,IAAAA,QAAQ,EAAEA,QAAQ,GAAG,UAAUwI,YAAV,EAAwBK,GAAxB,EAA6B;AAChD9F,MAAAA,WAAW,CAACyF,YAAD,CAAX;AACA,UAAIxI,QAAJ,EAAcA,QAAQ,CAACwI,YAAD,EAAeK,GAAf,CAAR;AACf,KAHiB,GAGdhG,SAvBsC;AAwB1CiG,IAAAA,eAAe,EAAEvG,SAAS,CAACwG,MAxBe;AAyB1C5E,IAAAA,YAAY,EAAEA,YAzB4B;AA0B1C3D,IAAAA,WAAW,EAAEA,WA1B6B;AA2B1CgB,IAAAA,eAAe,EAAEA,eA3ByB;AA4B1Cb,IAAAA,QAAQ,EAAEA,QA5BgC;AA6B1CmC,IAAAA,QAAQ,EAAEA,QA7BgC;AA8B1ChC,IAAAA,IAAI,EAAE,CAACR,QAAD,GAAYO,QAAZ,GAAuBgC,SA9Ba;AA+B1C9B,IAAAA,IAAI,EAAEA,IA/BoC;AAgC1CM,IAAAA,IAAI,EAAEA,IAhCoC;AAiC1CF,IAAAA,UAAU,EAAEA,UAjC8B;AAkC1C8B,IAAAA,SAAS,EAAEA,SAlC+B;AAmC1CC,IAAAA,YAAY,EAAEA;AAnC4B,GAA1B,CAtE2I,EA0GzJzB,UAAU,IAAI,aAAahF,KAAK,CAAC2L,aAAN,CAAoB7K,MAApB,EAA4B;AACzD+K,IAAAA,GAAG,EAAE9E,SADoD;AAEzDjB,IAAAA,SAAS,EAAEA,SAAS,CAACX,MAFoC;AAGzDnC,IAAAA,OAAO,EAAEA,OAHgD;AAIzDG,IAAAA,IAAI,EAAEA,IAJmD;AAKzD0C,IAAAA,YAAY,EAAEA,YAL2C;AAMzD7D,IAAAA,MAAM,EAAEA,MANiD;AAOzDuB,IAAAA,QAAQ,EAAEA,QAP+C;AAQzDO,IAAAA,GAAG,EAAEA,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,QAR4B;AASzD4D,IAAAA,YAAY,EAAEA,YAT2C;AAUzD3C,IAAAA,eAAe,EAAEA,eAVwC;AAWzDwC,IAAAA,YAAY,EAAEA,YAX2C;AAYzDlB,IAAAA,QAAQ,EAAEA,QAZ+C;AAazD/B,IAAAA,IAAI,EAAEA;AAbmD,GAA5B,CA1G8H,EAwHzJP,WAAW,IAAI,aAAa/D,KAAK,CAAC2L,aAAN,CAAoB9J,iBAApB,EAAuC;AACrE0K,IAAAA,GAAG,EAAEtF,YADgE;AAErEuF,IAAAA,MAAM,EAAEpF;AAF6D,GAAvC,EAG7B,OAAOrD,WAAP,KAAuB,QAAvB,GAAkC,aAAa/D,KAAK,CAAC2L,aAAN,CAAoBhL,GAApB,EAAyB;AACzEkC,IAAAA,UAAU,EAAE;AACV4J,MAAAA,KAAK,EAAE,kBADG;AAEVC,MAAAA,OAAO,EAAE;AAFC,KAD6D;AAKzEC,IAAAA,KAAK,EAAE,QALkE;AAMzEC,IAAAA,OAAO,EAAE,QANgE;AAOzEzJ,IAAAA,IAAI,EAAE;AAPmE,GAAzB,EAQ/C,aAAanD,KAAK,CAAC2L,aAAN,CAAoB/K,IAApB,EAA0B,IAA1B,EAAgCmD,WAAhC,CARkC,CAA/C,GAQ6DA,WAXhC,CAxH6H,CAA5E,CAA7D,EAmI4DF,QAAQ,IAAI+B,YAAY,CAACxG,MAAb,GAAsBwF,IAAlC,IAA0CiG,KAA1C,IAAmDA,KAAK,CAACzL,MAAzD,GAAkE,aAAaY,KAAK,CAAC2L,aAAN,CAAoB1K,UAApB,EAAgCnC,QAAQ,CAAC;AACtM+N,IAAAA,SAAS,EAAE;AAD2L,GAAD,EAEpM/B,eAFoM,CAAxC,CAA/E,GAEzD,IArIH,CAApB;AAsID,CAtdD;;AAwdAnI,SAAS,CAACmK,SAAV,GAAsBhL,kBAAtB;AACA,SAASa,SAAT","sourcesContent":["var _excluded = [\"background\", \"border\", \"columns\", \"data\", \"fill\", \"groupBy\", \"onClickRow\", \"onMore\", \"onSearch\", \"onSelect\", \"onSort\", \"onUpdate\", \"replace\", \"pad\", \"paginate\", \"pin\", \"placeholder\", \"primaryKey\", \"resizeable\", \"rowProps\", \"select\", \"show\", \"size\", \"sort\", \"sortable\", \"rowDetails\", \"step\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState, Fragment } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { Box } from '../Box';\nimport { Text } from '../Text';\nimport { Header } from './Header';\nimport { Footer } from './Footer';\nimport { Body } from './Body';\nimport { GroupedBody } from './GroupedBody';\nimport { Pagination } from '../Pagination';\nimport { buildFooterValues, buildGroups, buildGroupState, filterAndSortData, initializeFilters, normalizeCellProps, normalizePrimaryProperty } from './buildState';\nimport { normalizeShow, usePagination } from '../../utils';\nimport { StyledContainer, StyledDataTable, StyledPlaceholder } from './StyledDataTable';\nimport { DataTablePropTypes } from './propTypes';\n\nfunction useGroupState(groups, groupBy) {\n  var _useState = useState(function () {\n    return buildGroupState(groups, groupBy);\n  }),\n      groupState = _useState[0],\n      setGroupState = _useState[1];\n\n  var _useState2 = useState({\n    groups: groups,\n    groupBy: groupBy\n  }),\n      prevDeps = _useState2[0],\n      setPrevDeps = _useState2[1];\n\n  var prevGroups = prevDeps.groups,\n      prevGroupBy = prevDeps.groupBy;\n\n  if (groups !== prevGroups || groupBy !== prevGroupBy) {\n    setPrevDeps({\n      groups: groups,\n      groupBy: groupBy\n    });\n    var nextGroupState = buildGroupState(groups, groupBy);\n    setGroupState(nextGroupState);\n    return [nextGroupState, setGroupState];\n  }\n\n  return [groupState, setGroupState];\n}\n\nvar DataTable = function DataTable(_ref) {\n  var background = _ref.background,\n      border = _ref.border,\n      _ref$columns = _ref.columns,\n      columns = _ref$columns === void 0 ? [] : _ref$columns,\n      _ref$data = _ref.data,\n      data = _ref$data === void 0 ? [] : _ref$data,\n      fill = _ref.fill,\n      groupBy = _ref.groupBy,\n      onClickRow = _ref.onClickRow,\n      onMore = _ref.onMore,\n      onSearch = _ref.onSearch,\n      onSelect = _ref.onSelect,\n      onSortProp = _ref.onSort,\n      onUpdate = _ref.onUpdate,\n      replace = _ref.replace,\n      pad = _ref.pad,\n      paginate = _ref.paginate,\n      pin = _ref.pin,\n      placeholder = _ref.placeholder,\n      primaryKey = _ref.primaryKey,\n      resizeable = _ref.resizeable,\n      rowProps = _ref.rowProps,\n      select = _ref.select,\n      showProp = _ref.show,\n      size = _ref.size,\n      sortProp = _ref.sort,\n      sortable = _ref.sortable,\n      rowDetails = _ref.rowDetails,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 50 : _ref$step,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme; // property name of the primary property\n\n  var primaryProperty = useMemo(function () {\n    return normalizePrimaryProperty(columns, primaryKey);\n  }, [columns, primaryKey]); // whether or not we should show a footer\n\n  var showFooter = useMemo(function () {\n    return columns.filter(function (c) {\n      return c.footer;\n    }).length > 0;\n  }, [columns]); // what column we are actively capturing filter input on\n\n  var _useState3 = useState(),\n      filtering = _useState3[0],\n      setFiltering = _useState3[1]; // the currently active filters\n\n\n  var _useState4 = useState(initializeFilters(columns)),\n      filters = _useState4[0],\n      setFilters = _useState4[1]; // which column we are sorting on, with direction\n\n\n  var _useState5 = useState(sortProp || {}),\n      sort = _useState5[0],\n      setSort = _useState5[1]; // the data filtered and sorted, if needed\n  // Note: onUpdate mode expects the data to be passed\n  //   in completely filtered and sorted already.\n\n\n  var adjustedData = useMemo(function () {\n    return onUpdate ? data : filterAndSortData(data, filters, onSearch, sort);\n  }, [data, filters, onSearch, onUpdate, sort]); // the values to put in the footer cells\n\n  var footerValues = useMemo(function () {\n    return buildFooterValues(columns, adjustedData);\n  }, [adjustedData, columns]); // cell styling properties: background, border, pad\n\n  var cellProps = useMemo(function () {\n    return normalizeCellProps({\n      background: background,\n      border: border,\n      pad: pad,\n      pin: pin\n    }, theme);\n  }, [background, border, pad, pin, theme]); // if groupBy, an array with one item per unique groupBy key value\n\n  var groups = useMemo(function () {\n    return buildGroups(columns, adjustedData, groupBy, primaryProperty);\n  }, [adjustedData, columns, groupBy, primaryProperty]); // an object indicating which group values are expanded\n\n  var _useGroupState = useGroupState(groups, groupBy),\n      groupState = _useGroupState[0],\n      setGroupState = _useGroupState[1];\n\n  var _useState6 = useState(step),\n      limit = _useState6[0],\n      setLimit = _useState6[1];\n\n  var _useState7 = useState(select || onSelect && [] || undefined),\n      selected = _useState7[0],\n      setSelected = _useState7[1];\n\n  useEffect(function () {\n    return setSelected(select || onSelect && [] || undefined);\n  }, [onSelect, select]);\n\n  var _useState8 = useState([]),\n      rowExpand = _useState8[0],\n      setRowExpand = _useState8[1]; // any customized column widths\n\n\n  var _useState9 = useState({}),\n      widths = _useState9[0],\n      setWidths = _useState9[1]; // placeholder placement stuff\n\n\n  var headerRef = useRef();\n  var bodyRef = useRef();\n  var footerRef = useRef();\n\n  var _useState10 = useState(),\n      headerHeight = _useState10[0],\n      setHeaderHeight = _useState10[1];\n\n  var _useState11 = useState(),\n      footerHeight = _useState11[0],\n      setFooterHeight = _useState11[1]; // offset compensation when body overflows\n\n\n  var _useState12 = useState(0),\n      scrollOffset = _useState12[0],\n      setScrollOffset = _useState12[1]; // multiple pinned columns offset\n\n\n  var _useState13 = useState(),\n      pinnedOffset = _useState13[0],\n      setPinnedOffset = _useState13[1];\n\n  var onHeaderWidths = useCallback(function (columnWidths) {\n    var hasSelectColumn = Boolean(select || onSelect);\n    var pinnedProperties = columns.map(function (pinnedColumn) {\n      return pinnedColumn.pin && pinnedColumn.property;\n    }).filter(function (n) {\n      return n;\n    });\n\n    if (hasSelectColumn && pinnedProperties.length > 0) {\n      pinnedProperties = ['_grommetDataTableSelect'].concat(pinnedProperties);\n    }\n\n    var nextPinnedOffset = {};\n\n    if (columnWidths !== []) {\n      pinnedProperties.forEach(function (property, index) {\n        var columnIndex = property === '_grommetDataTableSelect' ? 0 : columns.findIndex(function (column) {\n          return column.property === property;\n        }) + hasSelectColumn;\n\n        if (columnWidths[columnIndex]) {\n          nextPinnedOffset[property] = {\n            width: columnWidths[columnIndex],\n            left: index === 0 ? 0 : nextPinnedOffset[pinnedProperties[index - 1]].left + nextPinnedOffset[pinnedProperties[index - 1]].width\n          };\n        }\n      });\n      setPinnedOffset(nextPinnedOffset);\n    }\n  }, [columns, setPinnedOffset, select, onSelect]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  useLayoutEffect(function () {\n    var _bodyRef$current$pare;\n\n    var nextScrollOffset = (((_bodyRef$current$pare = bodyRef.current.parentElement) == null ? void 0 : _bodyRef$current$pare.clientWidth) || 0) - bodyRef.current.clientWidth;\n    if (nextScrollOffset !== scrollOffset) setScrollOffset(nextScrollOffset);\n  });\n  useLayoutEffect(function () {\n    if (placeholder) {\n      if (headerRef.current) {\n        var nextHeaderHeight = headerRef.current.getBoundingClientRect().height;\n        setHeaderHeight(nextHeaderHeight);\n      } else setHeaderHeight(0);\n\n      if (footerRef.current) {\n        var nextFooterHeight = footerRef.current.getBoundingClientRect().height;\n        setFooterHeight(nextFooterHeight);\n      } else setFooterHeight(0);\n    }\n  }, [footerRef, headerRef, placeholder]); // remember that we are filtering on this property\n\n  var onFiltering = function onFiltering(property) {\n    return setFiltering(property);\n  }; // remember the search text we should filter this property by\n\n\n  var onFilter = function onFilter(property, value) {\n    var nextFilters = _extends({}, filters);\n\n    nextFilters[property] = value;\n    setFilters(nextFilters); // Let caller know about search, if interested\n\n    if (onSearch) onSearch(nextFilters);\n  }; // toggle the sort direction on this property\n\n\n  var onSort = function onSort(property) {\n    return function () {\n      var external = sort ? sort.external : false;\n      var direction;\n      if (!sort || property !== sort.property) direction = 'asc';else if (sort.direction === 'asc') direction = 'desc';else direction = 'asc';\n      var nextSort = {\n        property: property,\n        direction: direction,\n        external: external\n      };\n      setSort(nextSort);\n\n      if (onUpdate) {\n        var opts = {\n          count: limit,\n          sort: nextSort\n        };\n\n        if (groups) {\n          opts.expanded = Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          });\n        }\n\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n\n      if (onSortProp) onSortProp(nextSort);\n    };\n  }; // toggle whether the group is expanded\n\n\n  var onToggleGroup = function onToggleGroup(groupValue) {\n    return function () {\n      var nextGroupState = _extends({}, groupState);\n\n      nextGroupState[groupValue] = _extends({}, nextGroupState[groupValue], {\n        expanded: !nextGroupState[groupValue].expanded\n      });\n      setGroupState(nextGroupState);\n      var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n        return nextGroupState[k].expanded;\n      });\n\n      if (onUpdate) {\n        var opts = {\n          expanded: expandedKeys,\n          count: limit\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n\n      if (groupBy.onExpand) {\n        groupBy.onExpand(expandedKeys);\n      }\n    };\n  }; // toggle whether all groups are expanded\n\n\n  var onToggleGroups = function onToggleGroups() {\n    var expanded = Object.keys(groupState).filter(function (k) {\n      return !groupState[k].expanded;\n    }).length === 0;\n    var nextGroupState = {};\n    Object.keys(groupState).forEach(function (k) {\n      nextGroupState[k] = _extends({}, groupState[k], {\n        expanded: !expanded\n      });\n    });\n    setGroupState(nextGroupState);\n    var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n      return nextGroupState[k].expanded;\n    });\n\n    if (onUpdate) {\n      var opts = {\n        expanded: expandedKeys,\n        count: limit\n      };\n      if (showProp) opts.show = showProp;\n      if (sort != null && sort.property) opts.sort = sort;\n      onUpdate(opts);\n    }\n\n    if (groupBy.onExpand) {\n      groupBy.onExpand(expandedKeys);\n    }\n  }; // remember the width this property's column should be\n\n\n  var onResize = useCallback(function (property, width) {\n    if (widths[property] !== width) {\n      var nextWidths = _extends({}, widths);\n\n      nextWidths[property] = width;\n      setWidths(nextWidths);\n    }\n  }, [widths]);\n\n  if (size && resizeable) {\n    console.warn('DataTable cannot combine \"size\" and \"resizeble\".');\n  }\n\n  if (onUpdate && onMore) {\n    console.warn('DataTable cannot combine \"onUpdate\" and \"onMore\".');\n  }\n\n  var _usePagination = usePagination(_extends({\n    data: adjustedData,\n    page: normalizeShow(showProp, step),\n    step: step\n  }, paginate)),\n      items = _usePagination[0],\n      paginationProps = _usePagination[1];\n\n  var Container = paginate ? StyledContainer : Fragment;\n  var containterProps = paginate ? _extends({}, theme.dataTable.container, {\n    fill: fill\n  }) : undefined; // DataTable should overflow if paginating but pagination component\n  // should remain in its location\n\n  var OverflowContainer = paginate ? Box : Fragment;\n  var overflowContainerProps = paginate ? {\n    overflow: {\n      horizontal: 'auto'\n    },\n    flex: false\n  } : undefined; // necessary for Firefox, otherwise paginated DataTable will\n  // not fill its container like it does by default on other\n  // browsers like Chrome/Safari\n\n  var paginatedDataTableProps = paginate && (fill === true || fill === 'horizontal') ? {\n    style: {\n      minWidth: '100%'\n    }\n  } : undefined;\n  return /*#__PURE__*/React.createElement(Container, containterProps, /*#__PURE__*/React.createElement(OverflowContainer, overflowContainerProps, /*#__PURE__*/React.createElement(StyledDataTable, _extends({\n    fillProp: !paginate ? fill : undefined\n  }, paginatedDataTableProps, rest), /*#__PURE__*/React.createElement(Header, {\n    ref: headerRef,\n    cellProps: cellProps.header,\n    columns: columns,\n    data: adjustedData,\n    fill: fill,\n    filtering: filtering,\n    filters: filters,\n    groupBy: groupBy,\n    groups: groups,\n    groupState: groupState,\n    pin: pin === true || pin === 'header',\n    pinnedOffset: pinnedOffset,\n    selected: selected,\n    size: size,\n    sort: sort,\n    widths: widths,\n    onFiltering: onFiltering,\n    onFilter: onFilter,\n    onResize: resizeable ? onResize : undefined,\n    onSelect: onSelect ? function (nextSelected) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected);\n    } : undefined,\n    onSort: sortable || sortProp || onSortProp ? onSort : undefined,\n    onToggle: onToggleGroups,\n    onWidths: onHeaderWidths,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    rowDetails: rowDetails\n  }), groups ? /*#__PURE__*/React.createElement(GroupedBody, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    groupBy: typeof groupBy === 'string' ? {\n      property: groupBy\n    } : groupBy,\n    groups: groups,\n    groupState: groupState,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          expanded: Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          }),\n          count: limit + step\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + step;\n        });\n      }\n    } : onMore,\n    onSelect: onSelect ? function (nextSelected, row) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected, row);\n    } : undefined,\n    onToggle: onToggleGroup,\n    onUpdate: onUpdate,\n    replace: replace,\n    rowProps: rowProps,\n    selected: selected,\n    size: size,\n    step: step\n  }) : /*#__PURE__*/React.createElement(Body, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    data: !paginate ? adjustedData : items,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          count: limit + step\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + step;\n        });\n      }\n    } : onMore,\n    replace: replace,\n    onClickRow: onClickRow,\n    onSelect: onSelect ? function (nextSelected, row) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected, row);\n    } : undefined,\n    pinnedCellProps: cellProps.pinned,\n    pinnedOffset: pinnedOffset,\n    placeholder: placeholder,\n    primaryProperty: primaryProperty,\n    rowProps: rowProps,\n    selected: selected,\n    show: !paginate ? showProp : undefined,\n    size: size,\n    step: step,\n    rowDetails: rowDetails,\n    rowExpand: rowExpand,\n    setRowExpand: setRowExpand\n  }), showFooter && /*#__PURE__*/React.createElement(Footer, {\n    ref: footerRef,\n    cellProps: cellProps.footer,\n    columns: columns,\n    fill: fill,\n    footerValues: footerValues,\n    groups: groups,\n    onSelect: onSelect,\n    pin: pin === true || pin === 'footer',\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    selected: selected,\n    size: size\n  }), placeholder && /*#__PURE__*/React.createElement(StyledPlaceholder, {\n    top: headerHeight,\n    bottom: footerHeight\n  }, typeof placeholder === 'string' ? /*#__PURE__*/React.createElement(Box, {\n    background: {\n      color: 'background-front',\n      opacity: 'strong'\n    },\n    align: \"center\",\n    justify: \"center\",\n    fill: \"vertical\"\n  }, /*#__PURE__*/React.createElement(Text, null, placeholder)) : placeholder))), paginate && adjustedData.length > step && items && items.length ? /*#__PURE__*/React.createElement(Pagination, _extends({\n    alignSelf: \"end\"\n  }, paginationProps)) : null);\n};\n\nDataTable.propTypes = DataTablePropTypes;\nexport { DataTable };"]},"metadata":{},"sourceType":"module"}